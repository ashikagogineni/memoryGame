package memoryGame;

import java.util.Scanner;

public class MemoryGame {
    public static void main(String[] args) {
        GameDriver.startGame();
    }
}

class GameBoard {
    private static final String BOARD =
            "01234" +
            "56789" +
            "01234" +
            "56789";

    static final int ROWS = 4;
    static final int COLS = 5;
    private static int score = 0;

    static String initializeDisplayBoard() {
        String displayBoard = "";
        for (int i = 0; i < BOARD.length(); i++) {
            displayBoard += "* ";
        }
        return displayBoard;
    }

    static String flipCards(String board, int position, boolean reveal) {
        int index = (position - 1) * 2;

        if (index < BOARD.length()) {
            if (reveal && BOARD.charAt(index) != '*') {
                char cardValue = BOARD.charAt(index);
                board = board.substring(0, index) + cardValue + board.substring(index + 1);
            } else {
                board = board.substring(0, index) + "* " + board.substring(index + 2);
            }
        }
        return board;
    }

    static boolean cardsMatch(int pos1, int pos2) {
        int index1 = (pos1 - 1) * 2;
        int index2 = (pos2 - 1) * 2;

        if (index1 < BOARD.length() && index2 < BOARD.length()) {
            return BOARD.charAt(index1) == BOARD.charAt(index2);
        }
        return false;
    }

    static int getScore() {
        return score;
    }

    static void incrementScore() {
        score++;
    }

    static int readValidPosition(Scanner scanner) {
        int position;
        do {
            System.out.print("Enter a position (1-20): ");
            while (!scanner.hasNextInt()) {
                System.out.println("Please enter a valid number.");
                scanner.next();
            }
            position = scanner.nextInt();
        } while (position < 1 || position > 20);
        return position;
    }
}

class Board {
    private static final int COLS = 5;

    static void displayBoard(String board) {
        System.out.println("\nCurrent Board:");
        for (int i = 0; i < board.length(); i++) {
            if (i > 0 && i % COLS == 0) {
                System.out.println();
            }
            System.out.print(board.charAt(i) + " ");
        }
        System.out.println();
    }
}

class GameDriver {
    static void startGame() {
        GameBoard game = new GameBoard();
        Scanner scanner = new Scanner(System.in);
        String displayBoard = game.initializeDisplayBoard();

        while (game.getScore() < (game.ROWS * game.COLS) / 2) {
            Board.displayBoard(displayBoard);

            int pos1 = game.readValidPosition(scanner);
            displayBoard = game.flipCards(displayBoard, pos1, true);
            Board.displayBoard(displayBoard);

            int pos2 = game.readValidPosition(scanner);
            displayBoard = game.flipCards(displayBoard, pos2, true);

            if (game.cardsMatch(pos1, pos2)) {
                System.out.println("Match! You get a point.");
                game.incrementScore();
            } else {
                System.out.println("No match. Try again.");
                displayBoard = game.flipCards(displayBoard, pos1, false);
                displayBoard = game.flipCards(displayBoard, pos2, false);
            }
        }

        System.out.println("Congratulations! You've matched all the cards. Your score: " + game.getScore());
    }
}
